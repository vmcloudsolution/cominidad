<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    
    <t t-name="LoyaltyPoints">
        <div class='loyalty-points'>
            <div class='loyalty-points-title'>Points</div>
            <t t-if='points_won'>
                <div class="loyalty-points-won">
                    <span class='value'>+<t t-esc='widget.format_pr_default(points_won,rounding)'/></span>  
                </div>
            </t>
            <t t-if='points_spent'>
                <div class="loyalty-points-spent">
                    <span class='value'>-<t t-esc='widget.format_pr_default(points_spent,rounding)'/></span> 
                </div>
            </t>
            <div class='loyalty-points-total'>
                <span class='value'><t t-esc='widget.format_pr_default(points_total,rounding)' /></span>
            </div>
        </div>
    </t>

    <t t-name="LoyaltyButton">
        <div class='control-button'>
            <i class='fa fa-star' /> Rewards
        </div>
    </t>

    <t t-extend='OrderWidget'>
        <t t-jquery='.summary' t-operation='prepend'>
            <div class='loyalty-points oe_hidden'>.</div>
        </t>
    </t>

    <t t-extend='ClientLine'>
        <t t-jquery='.client-line' t-operation='append'>
            <td>
                <t t-esc='widget.format_pr_default(partner.loyalty_points || 0, widget.pos.loyalty ? widget.pos.loyalty.rounding : 1.0)' />
            </td>
        </t>
    </t>

    <t t-extend="XmlReceipt">
        <t t-jquery='.before-footer' t-operation='append'>
            <t t-if='receipt.loyalty'>
                <div class='loyalty' value-decimals='2' value-autoint='on'>
                    <div>--------------------------------</div>
                    <br/>
                    <div size='double-height'><t t-esc='receipt.loyalty.name'/></div>
                    <br />
                    <div><t t-esc='receipt.loyalty.client' /></div>
                    <br/>
                    <t t-if='receipt.loyalty.points_won'>
                        <line><left>Points Won</left><right><value><t t-esc='receipt.loyalty.points_won' /></value></right></line>
                    </t>
                    <t t-if='receipt.loyalty.points_spent'>
                        <line><left>Points Spent</left><right><value><t t-esc='receipt.loyalty.points_spent' /></value></right></line>
                    </t>
                    <t t-if='receipt.loyalty.points_total'>
                        <line><left>Total Points</left><right><value><t t-esc='receipt.loyalty.points_total' /></value></right></line>
                    </t>
                    <br />
                </div>
            </t>
        </t>
    </t>

    <t t-extend='ClientDetails'>
        <t t-jquery='.client-details-right' t-operation='prepend'>
            <div class='client-detail'>
                <span class='label'>Points</span>
                <span class='detail client-points'>
                    <t t-esc='widget.format_pr_default(partner.loyalty_points || 0, widget.pos.loyalty ? widget.pos.loyalty.rounding : 1.0)' />
                </span>
            </div>
        </t>
    </t>

    <t t-extend='ClientListScreenWidget'>
        <t t-jquery='.client-list thead tr' t-operation='append'>
            <th>Points</th>
        </t>
    </t>
    
    
    <t t-name="UnpaidOrdersPopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-unpaid-orders">
                <p class="message">Unpaid Orders</p>
                <t t-if='widget.pos.db.get_unpaid_orders().length === 0'>
                    <p class='comment'>
                        There are no unpaid orders
                    </p>
                </t>
                <t t-if='widget.pos.db.get_unpaid_orders().length > 0'>
                    <p class='comment traceback'>
                        <t t-esc='JSON.stringify(widget.pos.db.get_unpaid_orders(),null,2)' />
                    </p>
                </t>
                <div class="footer">
                    <div class="button confirm">
                        Ok
                    </div>
                </div>
            </div>
        </div>
    </t>
    <t t-name="SelectionPopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-selection">
                <p class="message"><t t-esc=" widget.message || 'Select' " /></p>
                <div class='selection scrollable-y touch-scrollable'>
                    <t t-foreach="widget.list || []" t-as="item">
                        <div class='selection-item' t-att-data-item-index='item_index'>
                            <t t-esc='item.label'/>
                        </div>
                    </t>
                </div>
                <div class="footer">
                    <div class="button cancel">
                        Cancel 
                    </div>
                </div>
            </div>
        </div>
    </t>
    <t t-name="NumberPopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-number">
                <p class="message"><t t-esc=" widget.message || '' " /></p>
                <div class='popup-input value active'>
                    <t t-esc='widget.inputbuffer' />
                </div>
                <div class='popup-numpad'>
                    <button class="input-button number-char" data-action='1'>1</button>
                    <button class="input-button number-char" data-action='2'>2</button>
                    <button class="input-button number-char" data-action='3'>3</button>
                    <button class="mode-button add" data-action='+10'>+10</button>
                    <br />
                    <button class="input-button number-char" data-action='4'>4</button>
                    <button class="input-button number-char" data-action='5'>5</button>
                    <button class="input-button number-char" data-action='6'>6</button>
                    <button class="mode-button add" data-action='+20'>+20</button>
                    <br />
                    <button class="input-button number-char" data-action='7'>7</button>
                    <button class="input-button number-char" data-action='8'>8</button>
                    <button class="input-button number-char" data-action='9'>9</button>
                    <button class="mode-button add" data-action='+50'>+50</button>
                    <br />
                    <button class="input-button numpad-char" data-action='CLEAR' >C</button>
                    <button class="input-button number-char" data-action='0'>0</button>
                    <button class="input-button number-char dot" data-action='.'>.</button>
                    <button class="input-button numpad-backspace" data-action='BACKSPACE' >
                        <img src="/point_of_sale/static/src/img/backspace.png" width="24" height="21" />
                    </button>
                    <br />
                </div>
                <div class="footer">
                    <div class="button confirm">
                        Ok
                    </div>
                    <div class="button cancel">
                        Cancel 
                    </div>
                </div>
            </div>
        </div>
    </t>
     <t t-name="TextInputPopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-textinput">
                <p class="message"><t t-esc=" widget.message || '' " /></p>
                <input type='text' t-att-value="widget.value || ''"></input>
                <div class="footer">
                    <div class="button confirm">
                        Ok 
                    </div>
                    <div class="button cancel">
                        Cancel 
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="TextAreaPopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-textinput">
                <p class="message"><t t-esc=" widget.message || '' " /></p>
                <textarea rows="10" cols="40"><t t-esc="widget.value" /></textarea>
                <div class="footer">
                    <div class="button confirm">
                        Ok 
                    </div>
                    <div class="button cancel">
                        Cancel 
                    </div>
                </div>
            </div>
        </div>
    </t>
    <t t-extend="PosTicket">
        <t t-jquery=".pos-sale-ticket table:first" t-operation="before">    
            <t t-if="customer_name">
                <div>Customer name: <t t-esc="customer_name"/><br /></div>
            </t>
            <t t-if="customer_loyalty_points > -1">
                <div>Customer bonus points: <t t-esc="customer_loyalty_points"/><br /><br /></div>
            </t>
        </t>
    </t>
</templates>
